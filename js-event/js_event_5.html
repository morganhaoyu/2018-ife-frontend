<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<div id="fade-obj" style="width:300px;height:300px;background:#000;opacity:1"></div>
    <button id="fade-btn">淡出</button>

    <script type="text/javascript">
    	var btn = document.getElementById("fade-btn");
    	var el = document.getElementById("fade-obj");
    	

    	function fadeOut() {
		  if(el.style.opacity > 0) { 
			 el.style.opacity -= 0.1;
			 btn.disabled = "disabled";
		  	 var t = setTimeout(fadeOut, 50); 	
		  	 //fadeOut后面不要加括号，否则表示立即执行，没有渐变效果。	
		  } else {
		  	 clearTimeout(t);
		  	 btn.innerHTML = "淡入";
		     btn.disabled = "";
		  	}
		}
    	
    	function fadeIn() {
    		var val = parseFloat(el.style.opacity);
		     //临界值是1
		    if(val < 1) {    
		      val += 0.1;
		      el.style.opacity = val;
		      btn.disabled = "disabled";
		      var q = setTimeout(fadeIn, 50); 
		    } else {
		  	 clearTimeout(q);
		  	 btn.innerHTML = "淡出";
		     btn.disabled = "";
		  	}
		}
    	
    	btn.addEventListener('click', function() {
    			if(el.style.opacity == 1){
    			  fadeOut(el);
    			} else {
    			  fadeIn(el);  
    			}
    	}, false)

    </script>

</body>
</html>