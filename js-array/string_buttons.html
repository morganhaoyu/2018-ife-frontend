<!DOCTYPE html>
<html>
<head>
    <title>String Buttons</title>
    <style>
      textarea {
        line-height: 20px;
        height: 20px;
      }
    </style>
</head>
<body>
<div>
    <label>String A:
        <input class="radio" id="radio-a" type="radio" checked="true" name="str-obj" value="a">
    </label>
    <textarea id="str-a"></textarea>
    <label>String B:
        <input class="radio" id="radio-b" type="radio" name="str-obj" value="b">
    </label>
    <textarea id="str-b"></textarea>        
    <label>Num A：<input id="num-a" type="number" value="0"></label>
    <label>Num B：<input id="num-b" type="number" value="1"></label>
</div>
<div>
    <button id="len-btn">获取当前选中输入的内容长度</button>
    <button id="third-char-btn">当前选中输入中的第3个字符</button>
    <button id="concat-btn">把两个输入框的文字连接在一起输出（concat）</button>
    <button id='index-btn'>输入B中的内容，在输入A的内容中第一次出现的位置（indexOf）</button>
    <button id="last-index-btn">输入A中的内容，在输入B的内容中最后一次出现的位置（lastIndexOf）</button>
    <button id="slice-btn">使用slice获取选中输入框内容的部分内容，参数为num-a及num-b</button>
    <button id="row-btn">当前选中输入框的行数</button>
    <button id="substr-btn">使用substr获取选中输入框内容的子字符串，参数为num-a及num-b</button>
    <button id="uppercase-btn">把所选输入框中的内容全部转为大写</button>
    <button id="lowercase-btn">把所选输入框中的内容全部转为小写</button>
    <button id="remove-space-btn">把所选输入框中内容的半角空格全部去除</button>
    <button id="replace-btn">把所选输入框中内容的a全部替换成另外一个输入框中的内容</button>
</div>
<p id="result"></p>

<script type="text/javascript">
    //获取被选中的radio
    var getRadioChecked = function() {
        var radio = document.getElementsByClassName('radio');
        for(let i = 0; i < radio.length; i++) {
            if(radio[i].checked == true) {
                return radio[i];
            }
        }
    };

    var strLen = function (radioVal) {
        var input = document.getElementById('str-' + radioVal);
        var inputVal = input.value;
        return inputVal.length;
    };

    var setResult = function(result) {
        var resDom = document.getElementById('result');
        resDom.innerText = result || '';
    };

    //获取当前选中输入的内容长度
    var lenBtn = document.getElementById('len-btn');
    lenBtn.addEventListener('click', function() {
        var radio = getRadioChecked();
        var rVal = radio.value;
        var result = strLen(rVal);
        setResult(result);
    })


    //当前选中输入中的第3个字符
    var thirdChar = function(radioVal) {
        var input = document.getElementById('str-' + radioVal);
        var inputVal = input.value;
        return inputVal.charAt(2);
    };

    var thirdCharBtn = document.getElementById('third-char-btn');
    thirdCharBtn.addEventListener('click', function() {
        var radio = getRadioChecked();
        var rVal = radio.value;
        var result = thirdChar(rVal);
        setResult(result);
    })


    //把两个输入框的文字连接在一起输出（concat）
    var strConcat = function() {
        var a = document.getElementById('str-a').value;
        var b = document.getElementById('str-b').value;
        return a.concat(b);
    };

    var concatBtn = document.getElementById('concat-btn');
    concatBtn.addEventListener('click', function() {
        var result = strConcat();
        setResult(result);
    })

    //输入B中的内容，在输入A的内容中第一次出现的位置（indexOf）
    var strIndex = function() {
        var a = document.getElementById('str-a').value;
        var b = document.getElementById('str-b').value;
        return a.indexOf(b);
    };

    var indexBtn = document.getElementById('index-btn');
    indexBtn.addEventListener('click', function() {
        var result = strIndex();
        setResult(result);
    })


    //输入A中的内容，在输入B的内容中最后一次出现的位置（lastIndexOf）
    var strLastIndex = function() {
        var a = document.getElementById('str-a').value;
        var b = document.getElementById('str-b').value;
        return b.lastIndexOf(a);
    };

    var lastIndexBtn = document.getElementById('last-index-btn');
    lastIndexBtn.addEventListener('click', function() {
        var result = strLastIndex();
        setResult(result);
    })


    //使用slice获取选中输入框内容的部分内容，参数为num-a及num-b
    var strSlice = function(radioVal) {
        var input = document.getElementById('str-' + radioVal);
        var inputVal = input.value;
        var numA = document.getElementById('num-a').value;
        var numB = document.getElementById('num-b').value;
        if(numA <= numB) {
            return inputVal.slice(numA, numB);
        } else {
            return inputVal.slice(numB, numA);
        }
    }

    var sliceBtn = document.getElementById('slice-btn');
    sliceBtn.addEventListener('click', function() {
        var radio = getRadioChecked();
        var rVal = radio.value;
        var result = strSlice(rVal);
        setResult(result);
    })


    //当前选中输入框的行数
    var countRows = function(radioVal) {
        var input = document.getElementById('str-' + radioVal);
        var inputVal = input.value;
        var taLineHeight = 20;
        var taHeight = input.scrollHeight;
        return Math.floor(taHeight / taLineHeight);
    }

    var rowBtn = document.getElementById('row-btn');
    rowBtn.addEventListener('click', function() {
        var radio = getRadioChecked();
        var rVal = radio.value;
        var result = countRows(rVal);
        setResult(result);
    })


    //使用substr获取选中输入框内容的子字符串，参数为num-a及num-b
    var strSub = function (radioVal) {
        var input = document.getElementById('str-' + radioVal);
        var inputVal = input.value;
        var A = document.getElementById('num-a').value;
        var B = document.getElementById('num-b').value;
        return inputVal.substr(A,B);       
    }

    var substrBtn = document.getElementById('substr-btn');
    substrBtn.addEventListener('click', function() {
        var radio = getRadioChecked();
        var rVal = radio.value;
        var result = strSub(rVal);
        setResult(result);
    })


    //把所选输入框中的内容全部转为大写
    var upper = function (radioVal) {
        var input = document.getElementById('str-' + radioVal);
        var inputVal = input.value;
        return inputVal.toUpperCase();
    }

    var uppercaseBtn = document.getElementById('uppercase-btn');
    uppercaseBtn.addEventListener('click', function() {
        var radio = getRadioChecked();
        var rVal = radio.value;
        var result = upper(rVal);
        setResult(result);
    })


    //把所选输入框中的内容全部转为小写
    var lower = function (radioVal) {
        var input = document.getElementById('str-' + radioVal);
        var inputVal = input.value;
        return inputVal.toLowerCase();
    }

    var lowercaseBtn = document.getElementById('lowercase-btn');
    lowercaseBtn.addEventListener('click', function() {
        var radio = getRadioChecked();
        var rVal = radio.value;
        var result = lower(rVal);
        setResult(result);
    })


    //把所选输入框中内容的半角空格全部去除
    var removeSpace = function(radioVal) {
        var input = document.getElementById('str-' + radioVal);
        var inputVal = input.value;
        return inputVal.replace(/ /g,'');   //正则表达式内是一个半角空格
    }

    var removeSpaceBtn = document.getElementById('remove-space-btn');
    removeSpaceBtn.addEventListener('click', function() {
        var radio = getRadioChecked();
        var rVal = radio.value;
        var result = removeSpace(rVal);
        setResult(result);
    })


    //把所选输入框中内容的a全部替换成另外一个输入框中的内容
    var strReplace = function(radioVal) {
        if(radioVal=='a') {
            var inputVal = document.getElementById('str-a').value;
            var replacement = document.getElementById('str-b').value;
            return inputVal.replace(/a/g,replacement);
        } else {
            var inputVal = document.getElementById('str-b').value;
            var replacement = document.getElementById('str-a').value;
            return inputVal.replace(/a/g,replacement);
        }
    }

    var replaceBtn = document.getElementById('replace-btn');
    replaceBtn.addEventListener('click', function() {
        var radio = getRadioChecked();
        var rVal = radio.value;
        var result = strReplace(rVal);
        setResult(result);
    })


</script>
</body>
</html>
